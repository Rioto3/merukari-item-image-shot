# Mercari Image Downloader

メルカリの商品ページに表示されている画像を一括ダウンロードするFirefoxアドオンです。

## 機能

- メルカリの商品ページに紫色のダウンロードボタンを追加
- ボタンをクリックすると、その商品の全画像を自動ダウンロード
- 「日付-商品タイトル」形式のフォルダに画像を保存（例: `250517-素敵な商品`）
- 商品IDと番号を付けたファイル名で保存（例: `m12345678_1.jpg`）
- 最大40枚の画像に対応
- タイトルの先頭の【】（角括弧）を自動的に削除

## インストール方法

### 一時的なインストール (開発用)

1. このリポジトリをクローンまたはダウンロード
2. Firefoxで `about:debugging` を開く
3. 「この Firefox」をクリック
4. 「一時的なアドオンを読み込む」をクリック
5. ダウンロードしたフォルダ内の `manifest.json` ファイルを選択

### 恒久的なインストール

このアドオンは現在開発中です。Firefox Add-ons Storeでの公開準備が整い次第、リンクを追加します。

## 使い方

1. メルカリの商品ページにアクセス (例: https://jp.mercari.com/item/m12345678)
2. ページ上部に表示される紫色の「画像一括保存」ボタンをクリック
3. 画像のダウンロードが自動的に開始され、ダウンロードフォルダ内に「日付-商品タイトル」形式のフォルダが作成される
4. ダウンロード状況はページ上部に表示される通知で確認可能

## フォルダ命名規則

画像は以下の命名規則で保存されます：

- フォルダ名: `YYMMDD-商品タイトル`
  - YYMMDD: 年月日（例: 250517）
  - 商品タイトル: 【】（角括弧）を除去、ファイル名に使えない文字を置換
- ファイル名: `商品ID_番号.jpg`

例：
```
250517-素敵な商品/m12345678_1.jpg
250517-素敵な商品/m12345678_2.jpg
...
```

## 動作原理

メルカリの商品画像は以下のURLパターンで公開されています：

```
https://static.mercdn.net/item/detail/orig/photos/[商品ID]_[画像番号].jpg
```

このアドオンは、商品IDを取得し、上記のパターンを使用して画像をダウンロードします。

## 注意事項

- このアドオンはFirefoxのみで動作します
- 画像の二次利用については著作権に十分ご注意ください
- メルカリのサイト構造が変更された場合、アドオンが動作しなくなる可能性があります

## 更新履歴

- v1.2: フォルダ命名規則を「日付-商品タイトル」形式に変更
- v1.1: 画像取得アルゴリズムの改善、エラー処理の強化
- v1.0: 初回リリース

## 開発者向け情報

### ファイル構成

- `manifest.json`: アドオンの設定ファイル
- `content.js`: メルカリページに実行されるスクリプト
- `background.js`: バックグラウンドで動作するスクリプト
- `style.css`: ボタンやステータス表示のスタイル

### 貢献方法

1. このリポジトリをフォーク
2. 新しいブランチを作成 (`git checkout -b feature/your-feature-name`)
3. 変更をコミット (`git commit -m 'Add some feature'`)
4. ブランチをプッシュ (`git push origin feature/your-feature-name`)
5. プルリクエストを作成

## ライセンス

MIT

## 作者

森谷 涼太 (Rioto Moriya)